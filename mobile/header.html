<script type="text/discourse-plugin" version="0.8">

let user = api.getCurrentUser();

let ignored = user.ignored_users;

if (ignored.length > 0) {
    
    //  window.onload = function(){
        
    //     if (document.querySelector("table.topic-list")) {
    //             let tr = $('*[data-notification-level="0"]');
    //             for (var i = 0; i < tr.length; i++) {
    //                 var topicTitle = tr[i].parentNode.querySelector("a span").innerText;
    //                 console.log('hide ' + topicTitle)
    //                 tr[i].parentNode.parentNode.remove()
    //             }
    //     }
    // }

    setInterval(function() {
        if (document.querySelector("table.topic-list")) {

            for (var u = 0; u < ignored.length; u++) {
                let tr = $('*[data-user-id="' + ignored[u] + '"]');
                for (var i = 0; i < tr.length; i++) {
                    var topicTitle = tr[i].parentNode.parentNode.querySelector("a span").innerText;
                    console.log('hide ' + topicTitle)
                    tr[i].parentNode.parentNode.remove()
                }
            }
        }
    }, 500);
}

</script>

